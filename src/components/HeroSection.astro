---
import Image from "astro/components/Image.astro";
import coverimage from "../assets/hero/home01.png";
import HeroDesign1 from "./HeroDesign1.astro";
import HeroDesign2 from "./HeroDesign2.astro";
---

<section
  class="bg-[var(--secondary-color)] dark:bg-[var(--secondary-bg-color)]"
>
  <style>
    .popup-container.show {
      opacity: 1;
      pointer-events: auto;
    }
  </style>

  <div class="relative z-10 py-4 h-[800px] overflow-hidden">
    <div class="relative top-20">
      <HeroDesign1 class="absolute right-0" />
      <HeroDesign1 class="absolute left-0 scale-x-[-1]" />
      <HeroDesign2 class="absolute right-[32px]" />
    </div>
    <div class="w-[696px] z-[2] px-[32px] ml-32 mt-32">
      <div class="text-start">
        <h1 class="font-bold text-primary text-4xl pt-32 mb-6 md:text-7xl">
          Writing Contracts made easy
        </h1>
        <p class="text-2xl text-primary mb-6 md:text-2xl">
          Wraft is an open-source tool that helps write and collaborate official
          documents with ease.
        </p>
      </div>
      <div class="mt-4 flex justify-start gap-4">
        <div class="btn-full">
          <a
            href="http://app.wraft.app"
          >
            Request Invite
          </a>
        </div>
        <button
          id="popup-button"
          class="btn-outline"
        >
          Watch Video
        </button>
      </div>
    </div>

    <div
      id="popup-container"
      class="popup-container fixed top-0 left-0 w-full h-full z-[9999] flex items-center justify-center bg-[rgba(0,0,0,0.8)] opacity-0 pointer-events-none transition-opacity duration-300 ease-in-out"
    >
      <span
        class="close-button font-medium absolute top-[30px] right-[30px] text-[#fff] cursor-pointer text-xl p-2"
        id="close-button">&#10005;</span
      >
      <div
        class="video-container z-[1] relative w-[90%] max-w-[800px] h-[60%] my-0 mx-[16px] sm:w-[700px] sm:h-[393.75px] md:w-[800px] md:h-[450px]"
      >
        <iframe
          id="youtube-iframe"
          src=""
          class="absolute top-0 left-0 w-full h-full"
          allowfullscreen></iframe>
      </div>
      <div class="w-full h-full z-[-1] absolute" id="close-container"></div>
    </div>

    <!-- <div class="mt-12 md:mt-24">
      <Image
        src={coverimage}
        alt="Hero section cover"
        class="mx-auto flex-shrink-0 w-[90%] md:w-[60%] max-w-full lg:max-w-[1004px] md:max-w-[550px] h-auto object-cover"
      />
    </div> -->
  </div>
  <script>
    const body = document.getElementsByTagName("body")[0]!;
    function openPopup(videoId: string) {
      var popupContainer = document.getElementById("popup-container")!;
      var youtubeIframe = document.getElementById(
        "youtube-iframe",
      ) as HTMLIFrameElement;

      youtubeIframe.src = "https://www.youtube.com/embed/" + videoId;
      popupContainer.classList.add("show");
    }
    function closePopup() {
      var popupContainer = document.getElementById("popup-container")!;
      var youtubeIframe = document.getElementById(
        "youtube-iframe",
      ) as HTMLIFrameElement;

      // popupContainer.remove()
      youtubeIframe.src = "";
      popupContainer.classList.remove("show");
    }

    var popupButton = document.getElementById("popup-button")!;
    popupButton.addEventListener("click", function () {
      body.classList.toggle("overflow-hidden");
      body.classList.toggle("overscroll-y-contain");
      openPopup(
        "I71DmG_t3rA?si=fYvnDjHdWdRhilx5?rel=0&modestbranding=1&autoplay=1",
      );
    });

    var popupCloseButton = document.getElementById("close-button")!;
    popupCloseButton.addEventListener("click", function () {
      body.classList.toggle("overflow-hidden");
      body.classList.toggle("overscroll-y-contain");
      closePopup();
    });

    var popupCloseContainer = document.getElementById("close-container")!;
    popupCloseContainer.addEventListener("click", function () {
      body.classList.toggle("overflow-hidden");
      body.classList.toggle("overscroll-y-contain");
      closePopup();
    });
  </script>
</section>
